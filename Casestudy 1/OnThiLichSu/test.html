<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÔN THI TRẮC NGHIỆM</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        .question {
            font-size: 20px;
            margin-bottom: 10px;
        }
        .result {
            margin-top: 20px;
            font-weight: bold;
        }
        .timer {
            font-size: 18px;
            color: red;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
<button id="readyGame">Bạn đã sẵn sàng?</button>
<div id="game" style="display: none;"></div>
<div class="timer" id="timer" style="display: none;"></div>
<div class="result" id="result"></div>
<script>
    const questions = [
        {
            question: "Câu hỏi 1: Đuôi thì chẳng thấy, mà có hai đầu?",
            answers: { a: "Cây cầu", b: "Cái thuyền", c: "Cái bàn", d: "Cái ghế" },
            correct: 'a'
        },
        {
            question: "Câu hỏi 2: Con gì biết đi nhưng người ta vẫn nói nó không biết đi?",
            answers: { a: "Con bò", b: "Con mèo", c: "Con chó", d: "Con gà" },
            correct: 'a'
        },
        {
            question: "Câu hỏi 3: Túi gì nghe tên tưởng ngọt, hoá ra đắng ngắt khó lọt khỏi người?",
            answers: { a: "Túi mật", b: "Túi tiền", c: "Túi xách", d: "Túi trà" },
            correct: 'a'
        },
        {
            question: "Câu hỏi 4: Một xương sống, một đống xương sườn là cái gì?",
            answers: { a: "Cái lược", b: "Cái nĩa", c: "Cái muỗng", d: "Cái đũa" },
            correct: 'a'
        },
    ];

    let currentQuestionIndex = 0;
    let correctAnswers = 0;
    let timer;
    const timeLimit = 60;

    document.getElementById('readyGame').onclick = readyGame;

    function readyGame() {
        currentQuestionIndex = 0;
        correctAnswers = 0; // Đặt lại số câu trả lời đúng
        document.getElementById('result').innerHTML = '';
        document.getElementById('game').style.display = 'block';
        document.getElementById('timer').style.display = 'block'; // Hiển thị đồng hồ
        startTimer();
        showQuestion();
    }

    function showQuestion() {
        if (currentQuestionIndex >= questions.length) {
            clearInterval(timer);
            document.getElementById('game').style.display = 'none';
            document.getElementById('result').innerHTML = `Chúc mừng! Bạn đã hoàn thành trò chơi! Số câu trả lời đúng: ${correctAnswers}/${questions.length}`;
            document.getElementById('timer').style.display = 'none'; // Ẩn đồng hồ khi hoàn thành
            return;
        }

        const question = questions[currentQuestionIndex];
        const answers = question.answers;
        const gameDiv = document.getElementById('game');
        gameDiv.innerHTML = `<div class="question">${question.question}</div>`;

        for (const [key, value] of Object.entries(answers)) {
            gameDiv.innerHTML += `
                    <div class="answer">
                        <input type="radio" name="answer" id="${key}" value="${key}">
                        <label for="${key}">${value}</label>
                    </div>
                `;
        }

        gameDiv.innerHTML += `<button onclick="checkAnswer()">Gửi đáp án</button>`;
    }

    function startTimer() {
        let timeRemaining = timeLimit;
        document.getElementById('timer').innerText = `${timeRemaining} giây`;
        timer = setInterval(() => {
            timeRemaining--;
            document.getElementById('timer').innerText = `${timeRemaining} giây`;
            if (timeRemaining <= 0) {
                clearInterval(timer);
                document.getElementById('game').style.display = 'none';
                document.getElementById('result').innerHTML = `Hết thời gian! Số câu trả lời đúng: ${correctAnswers}/${questions.length}`;
                document.getElementById('timer').style.display = 'none'; // Ẩn đồng hồ khi hết thời gian
            }
        }, 1000);
    }

    function checkAnswer() {
        const selectedAnswer = document.querySelector('input[name="answer"]:checked');
        if (!selectedAnswer) {
            alert("Vui lòng chọn một đáp án!");
            return;
        }

        const correctAnswer = questions[currentQuestionIndex].correct;

        if (selectedAnswer.value === correctAnswer) {
            correctAnswers++; // Tăng số câu trả lời đúng
            alert("Đúng rồi!");
        } else {
            alert(`Sai rồi! Đáp án đúng là: ${questions[currentQuestionIndex].answers[correctAnswer]}`);
        }

        currentQuestionIndex++; // Tăng chỉ số câu hỏi ngay lập tức
        showQuestion(); // Hiển thị câu hỏi tiếp theo
    }
</script>
</body>
</html>
